<script>
  async function generateResult() {
    try {
      const res = await fetch("https://wingo-backend-nqk5.onrender.com/api/cron/generate", {
        method: "POST",
        headers: { "Content-Type": "application/json" }
      });

      if (!res.ok) {
        throw new Error("Failed to generate result");
      }

      const data = await res.json();
      const result = data?.data?.result;
      const roundId = data?.data?.roundId;
      const now = new Date();
      const formattedTime = now.toLocaleString("en-GB", {
        day: "2-digit",
        month: "2-digit",
        year: "numeric",
        hour: "2-digit",
        minute: "2-digit",
        second: "2-digit",
        hour12: false,
        timeZone: "Asia/Kolkata" // Optional: for India time
      });

      document.getElementById("resultMessage").innerHTML = `
        ✅ <b>Result:</b> ${result}<br>
        🆔 <b>Round ID:</b> ${roundId}<br>
        🕒 <b>Time:</b> ${formattedTime}
      `;
    } catch (err) {
      console.error("❌ Error:", err);
      document.getElementById("resultMessage").innerHTML = "❌ Error: " + err.message;
    }
  }
</script>
