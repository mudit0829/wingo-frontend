<!DOCTYPE html>
<html>
<head>
  <title>Admin Dashboard</title>
</head>
<body>
  <h1>Welcome, Admin</h1>
  <button onclick="startTimer()">Start Timer</button>
  <button onclick="generateResult()">Generate Result</button>
  <button onclick="logout()">Logout</button>
  <table>
    <thead>
      <tr><th>Round ID</th><th>Result</th><th>Timestamp</th></tr>
    </thead>
    <tbody id="roundsTB"></tbody>
  </table>

 <script>
  // Fetch and display round data
  async function fetchRounds() {
    const response = await fetch('https://wingo-backend-nqk5.onrender.com/api/rounds');
    const rounds = await response.json();

    const tableBody = document.querySelector('table tbody');
    tableBody.innerHTML = '';
    rounds.reverse().forEach(round => {
      const row = document.createElement('tr');
      row.innerHTML = `
        <td>${round.roundId}</td>
        <td>${round.result || 'Pending'}</td>
        <td>${new Date(round.timestamp).toLocaleString()}</td>
      `;
      tableBody.appendChild(row);
    });
  }

  async function generateResult() {
    const response = await fetch('https://wingo-backend-nqk5.onrender.com/api/cron/generate-result', {
      method: 'POST'
    });

    const data = await response.json();
    alert(data.message || 'Result generated');
    fetchRounds();
  }

  document.addEventListener('DOMContentLoaded', fetchRounds);
</script>
</body>
</html>
