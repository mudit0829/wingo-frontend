<script>
  const backendUrl = "https://wingo-backend-nqk5.onrender.com"; // your backend URL

  async function placeBet(color) {
    const username = localStorage.getItem("username");
    const amount = parseInt(prompt(`Enter amount for ${color} bet:`));
    if (!username || !amount || isNaN(amount)) {
      alert("Invalid username or amount");
      return;
    }

    // ✅ 1. Fetch latest round
    let roundId;
    try {
      const res = await fetch(`${backendUrl}/api/rounds`);
      const data = await res.json();
      roundId = data[0]?.roundId;
    } catch (err) {
      alert("Unable to fetch round info");
      return;
    }

    // ✅ 2. Send bet
    const bet = {
      username,
      color,
      amount,
      roundId // ✅ use roundId, not roundTime
    };

    const response = await fetch(`${backendUrl}/api/bets`, {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify(bet)
    });

    if (response.ok) {
      alert("Bet placed successfully!");
    } else {
      alert("Error placing bet.");
    }
  }
</script>
