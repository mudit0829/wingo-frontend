<!DOCTYPE html>
<html>
<head>
  <title>WinGo Game</title>
</head>
<body>
  <h2>Welcome, <span id="userName"></span>!</h2>
  <p>Role: <span id="userRole"></span></p>
  <button onclick="logout()">Logout</button>

  <h3>Place Your Bet</h3>
  <label>Choose Color:</label>
  <select id="color">
    <option value="Red">Red</option>
    <option value="Green">Green</option>
    <option value="Violet">Violet</option>
  </select><br><br>

  <button onclick="placeBet()">Place Bet</button>
  <p id="betMessage"></p>

  <script>
    // Check login
    const username = localStorage.getItem("username");
    const role = localStorage.getItem("role");

    if (!username) {
      window.location.href = "index.html";
    }

    document.getElementById("userName").textContent = username;
    document.getElementById("userRole").textContent = role;

    async function placeBet() {
      const color = document.getElementById("color").value;

      const res = await fetch("https://wingo-backend-nqk5.onrender.com/api/bets/place", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({ username, color })
      });

      const data = await res.json();

      if (res.ok) {
        document.getElementById("betMessage").textContent = "✅ Bet placed successfully!";
      } else {
        document.getElementById("betMessage").textContent = "❌ " + (data.message || "Error placing bet.");
      }
    }

    function logout() {
      localStorage.clear();
      window.location.href = "index.html";
    }
  </script>
</body>
</html>
