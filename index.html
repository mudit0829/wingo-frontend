<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>WinGo Game</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #111;
      color: white;
      margin: 0;
      padding: 0;
      text-align: center;
    }
    .wallet-section {
      margin-top: 20px;
    }
    #wallet {
      font-size: 24px;
      font-weight: bold;
      margin-bottom: 10px;
    }
    .wallet-buttons {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-bottom: 20px;
    }
    .wallet-buttons button {
      padding: 10px 20px;
      background: #222;
      color: white;
      border: none;
      border-radius: 8px;
    }

    .color-buttons, .number-grid {
      margin: 10px 0;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
    }

    .color-buttons button, .number-grid button {
      padding: 10px 16px;
      font-size: 18px;
      border: none;
      border-radius: 10px;
      color: white;
      cursor: pointer;
    }

    .color-red { background: red; }
    .color-green { background: green; }
    .color-violet { background: purple; }

    .number-grid {
      width: 100%;
      max-width: 300px;
      margin: auto;
    }
    .number-grid button {
      width: 18%;
      background: #333;
    }

    /* Betting Slide Popup */
    .bet-popup {
      position: fixed;
      bottom: -100%;
      left: 0;
      right: 0;
      background: #222;
      color: white;
      border-radius: 20px 20px 0 0;
      padding: 20px;
      transition: bottom 0.3s ease-in-out;
      z-index: 1000;
    }
    .bet-popup.show {
      bottom: 0;
    }
    .bet-popup h3 {
      margin-top: 0;
    }
    .preset-buttons, .multiplier-buttons {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-bottom: 10px;
      flex-wrap: wrap;
    }
    .preset-buttons button, .multiplier-buttons button {
      background: #333;
      color: white;
      padding: 10px 15px;
      border-radius: 8px;
      border: none;
      font-size: 14px;
    }
    .bet-actions {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-top: 15px;
    }
    .bet-actions button {
      padding: 12px 20px;
      border: none;
      border-radius: 10px;
      font-size: 16px;
      cursor: pointer;
    }
    .place-btn {
      background: green;
      color: white;
    }
    .cancel-btn {
      background: #888;
      color: white;
    }

    @media(max-width: 500px) {
      .number-grid button {
        width: 18%;
        margin: 5px;
      }
      .wallet-buttons {
        flex-direction: column;
        gap: 10px;
      }
    }
  </style>
</head>
<body>
  <div class="wallet-section">
    <div id="wallet">Wallet: ₹0</div>
    <div class="wallet-buttons">
      <button onclick="alert('Deposit clicked')">Deposit</button>
      <button onclick="alert('Withdraw clicked')">Withdraw</button>
    </div>
  </div>

  <div class="color-buttons">
    <button class="color-red" onclick="openBetPopup('Red')">Red</button>
    <button class="color-green" onclick="openBetPopup('Green')">Green</button>
    <button class="color-violet" onclick="openBetPopup('Violet')">Violet</button>
  </div>

  <div class="number-grid">
    ${[0,1,2,3,4,5,6,7,8,9].map(num => `<button onclick="openBetPopup(${num})">${num}</button>`).join('')}
  </div>

  <!-- Pop-up Betting Box -->
  <div id="betPopup" class="bet-popup">
    <h3>Place Your Bet</h3>
    <div id="selectedBet"></div>
    <div class="preset-buttons">
      <button onclick="addAmount(1)">₹1</button>
      <button onclick="addAmount(5)">₹5</button>
      <button onclick="addAmount(10)">₹10</button>
      <button onclick="addAmount(100)">₹100</button>
    </div>
    <div class="multiplier-buttons">
      <button onclick="multiplyAmount(2)">×2</button>
      <button onclick="multiplyAmount(5)">×5</button>
      <button onclick="multiplyAmount(10)">×10</button>
      <button onclick="multiplyAmount(100)">×100</button>
    </div>
    <div>Total: ₹<span id="totalAmount">0</span></div>
    <div class="bet-actions">
      <button class="place-btn" onclick="placeBet()">Place Bet</button>
      <button class="cancel-btn" onclick="closeBetPopup()">Cancel</button>
    </div>
  </div>

  <script>
    let selectedOption = '';
    let currentAmount = 0;

    function fetchWallet() {
      const email = 'user@example.com';
      fetch(`https://wingo-backend-nqk5.onrender.com/api/users/wallet/${email}`)
        .then(res => res.json())
        .then(data => {
          const wallet = data.wallet || 0;
          document.getElementById('wallet').innerText = `Wallet: ₹${wallet.toFixed(2)}`;
        })
        .catch(err => {
          console.error('wallet fetch error:', err);
          document.getElementById('wallet').innerText = 'Wallet: ₹0';
        });
    }

    function openBetPopup(option) {
      selectedOption = option;
      currentAmount = 0;
      document.getElementById('selectedBet').innerText = `Selected: ${option}`;
      document.getElementById('totalAmount').innerText = '0';
      document.getElementById('betPopup').classList.add('show');
    }

    function closeBetPopup() {
      document.getElementById('betPopup').classList.remove('show');
    }

    function addAmount(amount) {
      currentAmount += amount;
      document.getElementById('totalAmount').innerText = currentAmount;
    }

    function multiplyAmount(multiplier) {
      currentAmount *= multiplier;
      document.getElementById('totalAmount').innerText = currentAmount;
    }

    function placeBet() {
      if (currentAmount <= 0) {
        alert('Please select amount');
        return;
      }
      alert(`Bet Placed on ${selectedOption} with ₹${currentAmount}`);
      closeBetPopup();
    }

    window.onload = fetchWallet;
  </script>
</body>
</html>
